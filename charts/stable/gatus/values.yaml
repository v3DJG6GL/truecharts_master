image:
  repository: ghcr.io/twin/gatus
  pullPolicy: IfNotPresent
  tag: v5.33.1@sha256:7121b5916c069eac6e266875d4984ec9262d84bd1274963939b358b32476d25b

service:
  main:
    ports:
      main:
        port: 8080
        targetPort: 8080

persistence:
  config:
    enabled: true
    mountPath: /config/config.yaml
    subPath: config.yaml
    readOnly: true
    type: "configmap"
    objectName: config

configmap:
  config:
    enabled: true
    data:
      config.yaml: |
        {{- if .Values.cnpg.main.enabled }}
        storage:
          type: postgres
          path: {{ (printf "%s?client_encoding=utf8" (.Values.cnpg.main.creds.std | trimAll "\"")) | quote }}
        {{- end }}

        endpoints:
          - name: example
            url: https://example.org
            interval: 60s
            conditions:
              - "[STATUS] == 200"
              - "[BODY] == pat(*<h1>Example Domain</h1>*)"

cnpg:
  main:
    enabled: true
    user: gatus
    database: gatus
